<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Video Hosting Platform</title><link rel="stylesheet" href="styles.css"><script src="script.js" defer></script></head><body><header><h1><a href="/" class="header-logo"><span class="meme">EgyptianMeme</span><span class="hub">Hub</span></a></h1><button id="login-button">Login</button><button id="logout-button" style="display:none;">Logout</button><input type="file" id="upload-input" style="display: none;" multiple><input type="text" id="search-bar" placeholder="Search for videos..."></header><main><section id="video-gallery" class="gallery"><!-- Video thumbnails will be dynamically added here --></section></main><footer><p>&copy;2025 EgyptianMemeHub</p></footer><script>document.addEventListener("DOMContentLoaded",function(){const loginButton=document.getElementById("login-button");const logoutButton=document.getElementById("logout-button");const uploadInput=document.getElementById("upload-input");const searchBar=document.getElementById("search-bar");const videoGallery=document.getElementById("video-gallery");const token=localStorage.getItem('authToken');if(token){loginButton.style.display='none';logoutButton.style.display='block'}else{loginButton.style.display='block';logoutButton.style.display='none'}
  loginButton.addEventListener("click",function(){window.location.href='login.html'});logoutButton.addEventListener("click",function(){localStorage.removeItem('authToken');window.location.href='login.html'});uploadInput.addEventListener("change",function(event){const files=event.target.files;for(let i=0;i<files.length;i++){uploadVideo(files[i])}});searchBar.addEventListener("input",function(){const query=this.value.toLowerCase();fetchVideos(query)});function uploadVideo(file){const formData=new FormData();formData.append("video",file);fetch('https://egyptianmemehub-backend.onrender.com/upload',{method:'POST',headers:{'Authorization':'Bearer '+token},body:formData}).then(response=>response.text()).then(data=>{console.log('Video uploaded successfully:',data);fetchVideos()}).catch(error=>{console.error('Error uploading video:',error)})}
  function fetchVideos(query=''){fetch('https://egyptianmemehub-backend.onrender.com/videos').then(response=>response.json()).then(videos=>{if(query){videos=videos.filter(video=>video.filename.toLowerCase().includes(query))}
  displayVideos(videos)}).catch(error=>{console.error('Error fetching videos:',error)})}
  function displayVideos(videos){videoGallery.innerHTML="";videos.forEach(video=>{const videoElement=document.createElement("div");videoElement.classList.add("video-thumbnail");videoElement.innerHTML=`
                  <a href="/video.html?filename=${video.filename}">
                    <video src="${video.url}" width="300"></video>
                    <h2>${video.filename}</h2>
                  </a>
                `;const videoTag=videoElement.querySelector('video');videoTag.addEventListener('contextmenu',(e)=>e.preventDefault());videoTag.addEventListener('play',(e)=>e.target.pause());videoGallery.appendChild(videoElement)})}
  fetchVideos()});</script></body></html>